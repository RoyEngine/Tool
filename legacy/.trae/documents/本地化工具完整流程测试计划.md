# 本地化工具完整流程测试计划

## 一、测试准备

### 1. 检查目录结构
- 确保 `D:\Poki\Tool\Localization_File` 目录已创建
- 确保工具配置文件已正确更新：
  - `directory_config.json`：`mod_root` 指向 `d:\Poki\Tool\Localization_File`
  - `directory_mapping.json`：只保留 `localization_file` 路径映射

### 2. 准备测试数据
- 在 `Localization_File/source/English/test_mod/src` 下创建测试Java文件
- 在 `Localization_File/source/Chinese/test_mod/src` 下创建测试Java文件
- 在 `Localization_File/source/English/test_mod` 下创建 `mod_info.json`
- 在 `Localization_File/source/Chinese/test_mod` 下创建 `mod_info.json`

## 二、Extract模式测试

### 1. 英文提取流程测试
- **执行命令**：`python main.py extract "英文提取流程"`
- **预期结果**：
  - 工具自动创建必要文件夹
  - 提取英文字符串到 `Localization_File/output/Extract_English/` 目录
  - 生成映射规则文件和报告
  - 不创建多余文件夹

### 2. 中文提取流程测试
- **执行命令**：`python main.py extract "中文提取流程"`
- **预期结果**：
  - 工具自动创建必要文件夹
  - 提取中文字符串到 `Localization_File/output/Extract_Chinese/` 目录
  - 生成映射规则文件和报告
  - 不创建多余文件夹

## 三、Extend模式测试

### 1. 中文映射到英文流程测试
- **执行命令**：`python main.py extend "已有中文src文件夹映射流程"`
- **预期结果**：
  - 工具自动创建必要文件夹
  - 使用中文映射规则将中文转换为英文
  - 输出结果到 `Localization_File/output/Extend_zh2en/` 目录
  - 生成映射后文件和报告
  - 不创建多余文件夹

### 2. 英文映射到中文流程测试
- **执行命令**：`python main.py extend "已有英文src文件夹映射流程"`
- **预期结果**：
  - 工具自动创建必要文件夹
  - 使用英文映射规则将英文转换为中文
  - 输出结果到 `Localization_File/output/Extend_en2zh/` 目录
  - 生成映射后文件和报告
  - 不创建多余文件夹

## 四、验证步骤

### 1. 路径验证
- 检查所有流程都使用 `Localization_File` 目录
- 检查不使用传统的 `project/` 目录
- 检查只创建框架文档中指定的文件夹

### 2. 输出验证
- 检查 `output/Extract_English/` 目录是否生成正确的映射规则文件
- 检查 `output/Extract_Chinese/` 目录是否生成正确的映射规则文件
- 检查 `output/Extend_zh2en/` 目录是否生成正确的映射后文件
- 检查 `output/Extend_en2zh/` 目录是否生成正确的映射后文件

### 3. 文件夹验证
- 检查是否只创建了框架文档中指定的文件夹
- 检查没有创建多余的文件夹
- 检查所有文件夹结构符合预期

## 五、测试执行顺序

1. 执行英文提取流程测试
2. 验证英文提取结果
3. 执行中文提取流程测试
4. 验证中文提取结果
5. 执行中文映射到英文流程测试
6. 验证中文映射结果
7. 执行英文映射到中文流程测试
8. 验证英文映射结果
9. 最终验证所有路径和文件夹结构

## 六、预期测试结果

- ✅ 所有流程都使用正确的 Localization_File 路径
- ✅ 不创建多余的文件夹
- ✅ 输出结果符合预期
- ✅ 所有模块运行正常
- ✅ 路径迁移完全成功，不再使用传统路径

## 七、测试工具和方法

- 使用命令行执行测试命令
- 手动检查文件系统目录结构
- 检查输出文件内容
- 验证配置文件是否正确
- 使用日志记录器跟踪执行过程

## 八、风险和应对措施

- **风险**：测试数据不足导致测试不全面
  **应对**：准备多样化的测试数据，覆盖不同场景

- **风险**：路径配置错误导致测试失败
  **应对**：仔细检查所有配置文件，确保路径正确

- **风险**：传统路径硬编码导致测试失败
  **应对**：检查并修复所有硬编码的传统路径

- **风险**：文件夹创建逻辑错误导致多余文件夹
  **应对**：严格按照框架文档检查文件夹创建逻辑

## 九、测试完成标准

- 所有测试用例执行成功
- 所有流程使用正确的 Localization_File 路径
- 不创建多余的文件夹
- 输出结果符合预期
- 所有模块运行正常
- 路径迁移完全成功，不再使用传统路径